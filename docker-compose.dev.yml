version: "3"
services:
  paper-web-app:
    build:
      dockerfile: ./docker/dev/Dockerfile-dev
    volumes:
      - '../paper/src:/usr/local/app/src'
    ports:
      - "8090:4200"
  paper-ebook-admin-be:
    build:
      args:
        - ENVIRONMENT_NAME=dev
    volumes:
      - ../paper-ebook-admin-be:/usr/src/app/paper-ebook-admin-be
      - /usr/src/app/paper-ebook-admin-be/node_modules
  paper-ebook-repository:
    build:
      args:
        - ENVIRONMENT_NAME=dev
    volumes:
      - ../paper-ebook-repository:/usr/src/app/paper-ebook-repository
      - /usr/src/app/paper-ebook-repository/node_modules
  paper-stripe-payment:
    build:
      args:
        - ENVIRONMENT_NAME=dev
    volumes:
      - ../paper-stripe-payment:/usr/src/app/paper-stripe-payment
      - /usr/src/app/paper-stripe-payment/node_modules
    environment:
      - STRIPE_PAYMENT_API_KEY=${PAPER_STRIPE_PAYMENT_BE_PAYMENT_API_KEY_DEV}
  paper-epay-payment:
    build:
      args:
        - ENVIRONMENT_NAME=dev
    volumes:
      - ../paper-epay-payment:/usr/src/app/paper-epay-payment
      - /usr/src/app/paper-epay-payment/node_modules
  paper-be:
    build:
      args:
        - ENVIRONMENT_NAME=dev
    volumes:
      - ../paper-be:/usr/src/app/paper-be
      - /usr/src/app/paper-be/node_modules
